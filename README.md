
# Cоциальная сеть для путешественников
### Комментарий от заказчика
> Что касается будущей аудитории социальной сети - у бизнеса есть огромные средства для рекламы и продвижения социальной сети, поэтому пользовательская база будет постепенно линейно расти и предполагается, что через год достигнет примерно 10 000 000 уникальных пользователей в день, после чего также будет продолжать расти. Бизнес пока нацелен только на аудиторию стран СНГ (_на зарубежный рынок выходить планов нет_). Будущая система должна быть очень надежной, а также, чтобы с ней было удобно взаимодействовать, используя мобильные устройства и браузер.
### Функциональные требования
1. Публикация постов из путешествий с фотографиями, небольшим описанием и привязкой к конкретному месту путешествия
2. Оценка и комментарии постов других путешественников
3. Подписка на других путешественников, чтобы следить за их активностью
4. Поиск популярных мест для путешествий и просмотр постов с этих мест
5. Просмотр ленты других путешественников и ленты пользователя, основанной на подписках в обратном хронологическом порядке

### Нефункциональные требования
1. Пользователи: 10 000 000 DAU
2. Сезонность: летом ожидается пиковая активность
3. Регион: СНГ
4. Надёжность: 99.995% uptime SLO
5. Хранение данных: все данные хранятся вечно
6. Активность:
	1. Пользователь публикует **1 пост в неделю**
	2. Пользователь смотрит **50 постов в день**
	3. Пользователь добавляет **3 фотографии к 1 посту**
	4. Пользователь ставит **10 реакций в день**
	5. Пользователь пишет **2 комментария в день**
	6. Пользователь читает **100 комментариев в день**
7. Лимиты:
	1. Пост может включать **максимум 20 фотографий**
	2. Пользователь может опубликовать **максимум 50 публикаций за день**
	3. Пользователь может подписаться максимум на **200 пользователей за день**
8. Временные ограничения:
	1. Лента прогружается **максимум за 3 секунд**
	2. Пост прогружается **максимум за 3 секунды**
	3. Фотография прогружается **максимум за 2 секунды**
	4. Реакция ставится **максимум за 3 секунды** (в back-е)
	5. Комментарий добавляется **максимум за 3 секунды** (в back-е)
### Оценка нагрузки
#### RPS
##### Посты
- Add: 10 000 000 * (1 / 7) / 86 400 = 17
- Read: 10 000 000 * 50 / 86 400 = 5 800
##### Фото
- Upload: 10 000 000 * (1 / 7) * 3 / 86 400 = 50
- Download: 10 000 000 * 50 * 3 / 86 400 = 18 000
##### Реакции
- Add: 10 000 000 * 10 / 86 400 = 1 200
##### Комментарии
- Add: 10 000 000 * 2 / 86 400 = 1 200
- Read: 10 000 000 * 100 / 86 400 = 11 600
#### Трафик
Примерные оценки сущностей указаны в [этом файле](Entities.md)
##### Посты
- Write: 17 * 330B = 6KB
- Read: 5 800 * 330B = 2MB
##### Фото (без учёта CDN)
- Write: 85 * ((3 * 500KB) + 100KB) = 150MB
- Read: 29 000 * ((3 * 500KB) + 100KB) = 50GB
##### Реакции
- Write: 1 200 * 40B = 48KB
##### Комментарии
- Write: 1 200 * 100B = 120KB
- Read: 11 600 * 100B = 1.2MB